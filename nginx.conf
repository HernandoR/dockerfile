server {
    listen 80 default_server;
    root /opt/run;

    client_body_in_file_only    clean;
    client_body_temp_path       /tmp/request_body;
    fastcgi_pass_request_body   off;

    location / {
        try_files '' /run-request.pl?$query_string;
    }

    location = /run-request.pl{
        fastcgi_pass    unix:/run/fcgiwrap.socket;
        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;
        fastcgi_param   QUERY_STR           $query_string;
        fastcgi_param   REQUEST_BODY        $request_body;
        fastcgi_param   REQUEST_STR         $request_uri;
        fastcgi_param   METHOD_TYPE         $request_method;
        fastcgi_param   HTTP_VERSION        $server_protocol;
        fastcgi_param   FORM_CONTENT        $request_body;
        fastcgi_param   REMOTE_ADDR         $remote_addr;
        fastcgi_param   REMOTE_PORT         $remote_port;
        fastcgi_param   REQUEST_BODY_FILE   $request_body_file;
        include         fastcgi_params;
    }
}